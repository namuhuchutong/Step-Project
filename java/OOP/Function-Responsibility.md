# 책임과 기능 분리

## 기능 분해

- 기능은 하위 기능으로 분해

- ex) 암호 변경
    - 변경 대상 확인
        - 변경 대상 구함
        - 대상이 없으면 오류 응답
    - 대상 암호 변경
        - 암호 일치 여부 확인
            - 불일치하면 암호 불일치 응답
        - 암호 변경

## 기능을 누가 제공할 것인가?

- 기능은 곧 책임

- 분리한 각 기능을 알맞게 분배

## 큰 클래스, 큰 메서드

- 클래스나 메서드가 커지면 절차 지향의 문제가 발생
    - 큰 클래스 : 많은 필드를 많은 메서드가 공유
    - 큰 메서드 : 많은 변수를 많은 코드가 공유
    - 여러 기능이 한 클래스, 메서드에 섞여 있을 가능성
- 책임에 따라 알맞게 코드 분리 필요


## 책인 분배, 분리 방법

- 패턴 적용

- 계산 기능 분리

- 외부 연동 분리

- 조건별 분기는 추상화


### 패턴 적용 

- 전형적인 역할 분리
    - 간단한 웹 : 컨트롤러, 서비스, DAO
    - 복잡한 도메인 : 엔티티 밸류, 리포지토리, 도메인 서비스
    - AOP : Aspect(공통 기능)
    - GoF : 팩토리, 빌더, 전략, 템플릿 메소드, 프록시, 데코레이터 등

### 계산 분리

- 계산 기능을 클래스로 작성

### 연동 분리

- 네트워크, 메시징, 파일 등 연동 처리 코드 분리

### 조건 분기는 추상화

- 연속적인 if-else 추상화 고민

### 주의

- 의도가 잘 드러나는 이름 사용

## 역할 분리와 테스트

- 역할 분리가 잘 되면 테스트도 용이해짐

